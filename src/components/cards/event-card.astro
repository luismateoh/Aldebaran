---
import { Badge } from "@/components/ui/badge";
import { formatDate, capitalize } from "@/lib/utils";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { Icon } from "astro-icon/components";

type Props = CollectionEntry<"events">;

const event = Astro.props;
---

<article class="group space-y-3">
	<a
		href={`/events/${event.slug}/`}
		class="flex h-52 group-hover:-translate-y-2 group-hover:shadow-xl transition duration-300"
	>
		<Image
			loading="eager"
			class="w-full h-full object-cover rounded-xl overflow-hidden"
			width={720}
			height={360}
			src={event.data.cover}
			alt="descriptive text"
			transition:name={`img-${event.slug}`}
		/>
	</a>

	<div class="flex items-center justify-between">
		<a
			href={`/events/category/${event.data.category}`}
			transition:name={"badge-cat-" + event.slug}
		>
			<Badge radius="md" className="capitalize">
				{event.data.category}
			</Badge>
		</a>
		<span
			class="font-medium text-muted-foreground"
			transition:name={"date-" + event.slug}
		>
      {capitalize(formatDate(event.data.eventDate))}
    </span>
	</div>

	<div class="flex items-center justify-between flex-wrap">
		<div class="flex items-center gap-1">
			<a
				href={`/events/location/${event.data.municipality}`}
				transition:name={"badge-loc-" + event.slug}
			>
				<Badge radius="md" variant="outline" className="capitalize">
					{event.data.municipality}
				</Badge>
			</a>
			<p class="flex items-center text-muted-foreground gap-1 align-middle justify-center">
				<Icon name="lucide:mountain" /> {event.data.altitude}
			</p>
		</div>

		<div class="flex items-center space-x-1">

			{event.data.distances.map((distance) => (
				<Badge radius="lg" variant="secondary" key={distance}>
					{distance}
				</Badge>
			))}
		</div>

	</div>

	<div>
		<a href={`/events/${event.slug}/`} class="group-hover:underline">
			<h2
				class="font-heading text-xl md:text-2xl leading-snug line-clamp-3"
				transition:name={"title-" + event.slug}
			>
				{capitalize(event.data.title.toUpperCase())}
			</h2>
		</a>
	</div>
</article>
